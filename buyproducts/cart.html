<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="cart.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="./buy_products.js"></script>
    <style>
      .cart-info {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .cart-item {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 10px;
        margin-bottom: 15px;
      }
      .cart-item img {
        border-radius: 4px;
      }
      .total-price {
        font-size: 1.5rem;
        font-weight: bold;
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        let cartItems = JSON.parse(localStorage.getItem("CARTS")) || [];
        console.log("Cart Items:", cartItems);

        const cartItemsCheckout = document.getElementById(
          "cart-items-checkout"
        );
        const dyna = document.getElementById("dyna");

        function updateCheckoutCart() {
          cartItemsCheckout.innerHTML = "";
          let totalPrice = 0;

          cartItems.forEach((item) => {
            const { product, image, price, quantity } = item;
            const itemTotal = price * quantity;
            totalPrice += itemTotal;

            const itemElement = document.createElement("div");
            itemElement.classList.add("cart-item");
            itemElement.innerHTML = `
                        <div  class="d-flex align-items-center">
                            <img src="${image}" alt="${product}" class="me-3" style="width: 80px;">
                            <div>
                                <p class="mb-0 fw-bold fs-4">${product}</p>
                                <p class="mb-0 fs-3">Quantity: ${quantity}</p>
                                <p class="mb-0 fs-3">Price: $${price}</p>
                                <p class="mb-0 fs-3">Total: $${itemTotal.toFixed(
                                  2
                                )}</p>
                            </div>
                        </div>
                    `;
            cartItemsCheckout.appendChild(itemElement);
          });

          dyna.textContent = `Total Price: $${totalPrice.toFixed(2)}`;
        }

        updateCheckoutCart();

        document
          .getElementById("make-payment-btn")
          .addEventListener("click", () => {
            window.location.href = "buy_products.html";
          });
      });
    </script>
  </head>
  <body>
    <header class="header">
      <img
        src="favicon_new.png"
        alt="logo"
        style="height: 50px; width: 50px; margin-right: 10px"
      />
      <a href="#" class="logo" style="margin-inline-end: auto">
        <h3>AgriLearnNetwork</h3>
      </a>
      <i class="bx bx-menu" id="menu-icon"></i>
      <nav class="navbar">
        <a href="index.html#home"><i class="fa-solid fa-house"></i> Home</a>
        <a href="index.html#about"
          ><i class="fa-solid fa-circle-info"></i> About</a
        >
        <a href="blogpage.html" target="_self"
          ><i class="fa-solid fa-blog"></i> Blogs</a
        >
        <a href="index.html#Resource Library"
          ><i class="fa-solid fa-book"></i> Resource Library</a
        >
        <a href="faqpage.html"><i class="fas fa-question-circle"></i>FAQs</a>
        <a href="index.html#contact" id="nav--contact"
          ><i class="fa-solid fa-phone"></i> Contact</a
        >
        <a href="buy_products.html"
          ><i class="fa fa-shopping-cart"></i>Buy Products</a
        >
        <a href="login.html">
          <button id="log-in-btn" class="login-btn">Login</button>
        </a>
      </nav>
    </header>

    <div class="container mt-5">
      <div class="row" style="width: 100%">
        <div class="col-12">
          <div class="p-3 cart-info pt-0" id="collapseExample">
            <p class="h4 mb-0" style="font-size: 25px; font-weight: 800;">Summary</p>
            <div id="cart-items-checkout"></div>
            <h2>
              <span
                id="dyna"
                style="
                  text-align: end;
                  display: flex;
                  justify-content: end;
                  margin-block: 10px;
                  font-size: 20px;
                "
                class="total-price"
                >0</span
              >
            </h2>
            <div id="li"></div>
            <a href="checkout.html">
              <button style="width: 100%; font-size: 20px;">Checkout</button>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div id="backtoTop">
      <a href="cart.html"><i class="bx bx-up-arrow-alt"></i></a>
    </div>
    <div class="cursor"></div>
    <div class="cursor2"></div>

    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
    <script src="script.js"></script>
    <script src="https://cdn.botpress.cloud/webchat/v1/inject.js"></script>
    <script src="./buy_products.js"></script>
  </body>
</html>
